<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NASA API Examples - Demo</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .demo-section {
            background: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #00d4ff;
        }
        .demo-button {
            background: #00d4ff;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 5px;
        }
        .demo-button:hover {
            background: #0099cc;
        }
        .result-container {
            background: #333;
            padding: 15px;
            margin-top: 10px;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
        }
        .loading {
            color: #00d4ff;
            font-style: italic;
        }
        .error {
            color: #ff4757;
        }
        .success {
            color: #2ed573;
        }
        img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            margin: 10px 0;
        }
        .api-url {
            background: #444;
            padding: 5px 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            word-break: break-all;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
    </style>
</head>
<body>
    <h1>üöÄ NASA API Demonstrations</h1>
    <p>Esta p√°gina demuestra c√≥mo usar las diferentes APIs de NASA integradas en el proyecto.</p>
    
    <div class="grid">
        <!-- APOD Demo -->
        <div class="demo-section">
            <h2>üì∏ Astronomy Picture of the Day (APOD)</h2>
            <p>Obtiene la imagen astron√≥mica del d√≠a de NASA.</p>
            <button class="demo-button" onclick="fetchAPODDemo()">Cargar APOD</button>
            <button class="demo-button" onclick="fetchAPODDate()">APOD de fecha espec√≠fica</button>
            <div class="result-container" id="apod-result">
                <p>Haz clic en un bot√≥n para cargar datos...</p>
            </div>
        </div>

        <!-- EPIC Demo -->
        <div class="demo-section">
            <h2>üåç Earth Polychromatic Imaging Camera (EPIC)</h2>
            <p>Im√°genes de la Tierra tomadas desde el punto L1 de Lagrange.</p>
            <button class="demo-button" onclick="fetchEPICDemo()">Cargar im√°genes EPIC</button>
            <button class="demo-button" onclick="fetchEPICLatest()">√öltima imagen disponible</button>
            <div class="result-container" id="epic-result">
                <p>Haz clic en un bot√≥n para cargar datos...</p>
            </div>
        </div>

        <!-- Mars Rover Demo -->
        <div class="demo-section">
            <h2>üî¥ Mars Rover Photos</h2>
            <p>Fotograf√≠as tomadas por los rovers de Marte.</p>
            <button class="demo-button" onclick="fetchMarsRoverDemo('curiosity')">Curiosity</button>
            <button class="demo-button" onclick="fetchMarsRoverDemo('opportunity')">Opportunity</button>
            <button class="demo-button" onclick="fetchMarsRoverDemo('spirit')">Spirit</button>
            <div class="result-container" id="mars-result">
                <p>Haz clic en un rover para ver sus fotos...</p>
            </div>
        </div>

        <!-- Near Earth Objects Demo -->
        <div class="demo-section">
            <h2>‚òÑÔ∏è Near Earth Objects (NEO)</h2>
            <p>Asteroides y cometas cercanos a la Tierra.</p>
            <button class="demo-button" onclick="fetchNEODemo()">Objetos cercanos hoy</button>
            <button class="demo-button" onclick="fetchNEOStats()">Estad√≠sticas NEO</button>
            <div class="result-container" id="neo-result">
                <p>Haz clic en un bot√≥n para cargar datos...</p>
            </div>
        </div>

        <!-- Earth Imagery Demo -->
        <div class="demo-section">
            <h2>üõ∞Ô∏è Earth Imagery</h2>
            <p>Im√°genes satelitales de ubicaciones espec√≠ficas en la Tierra.</p>
            <button class="demo-button" onclick="fetchEarthImagery('Madrid')">Madrid, Espa√±a</button>
            <button class="demo-button" onclick="fetchEarthImagery('NewYork')">Nueva York, USA</button>
            <button class="demo-button" onclick="fetchEarthImagery('Tokyo')">Tokio, Jap√≥n</button>
            <div class="result-container" id="earth-result">
                <p>Haz clic en una ciudad para ver imagen satelital...</p>
            </div>
        </div>

        <!-- API Status Demo -->
        <div class="demo-section">
            <h2>‚ö° Estado de APIs</h2>
            <p>Verifica el estado y disponibilidad de las APIs de NASA.</p>
            <button class="demo-button" onclick="checkAPIStatus()">Verificar estado</button>
            <button class="demo-button" onclick="testAPIKey()">Probar API Key</button>
            <div class="result-container" id="status-result">
                <p>Haz clic para verificar el estado de las APIs...</p>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>üîß Configuraci√≥n</h2>
        <p>Para usar estas demos, necesitas una API key de NASA:</p>
        <ol>
            <li>Visita <a href="https://api.nasa.gov/" target="_blank" style="color: #00d4ff;">https://api.nasa.gov/</a></li>
            <li>Haz clic en "Get Started"</li>
            <li>Completa el formulario para obtener tu API key gratuita</li>
            <li>Reemplaza 'DEMO_KEY' en el c√≥digo con tu API key</li>
        </ol>
        <div class="api-url">
            API Key actual: <span id="current-api-key">DEMO_KEY</span>
        </div>
    </div>

    <script>
        // Configuraci√≥n de la API
        const API_KEY = 'DEMO_KEY'; // Reemplaza con tu API key
        const NASA_BASE_URL = 'https://api.nasa.gov';

        // Coordenadas de ciudades para Earth Imagery
        const CITY_COORDINATES = {
            'Madrid': { lat: 40.4168, lon: -3.7038 },
            'NewYork': { lat: 40.7128, lon: -74.0060 },
            'Tokyo': { lat: 35.6762, lon: 139.6503 }
        };

        // Utility function para mostrar resultados
        function showResult(containerId, content, type = 'info') {
            const container = document.getElementById(containerId);
            container.innerHTML = `<div class="${type}">${content}</div>`;
        }

        function showLoading(containerId) {
            showResult(containerId, 'Cargando datos de NASA...', 'loading');
        }

        function showError(containerId, error) {
            showResult(containerId, `Error: ${error}`, 'error');
        }

        // APOD Demo
        async function fetchAPODDemo() {
            showLoading('apod-result');
            try {
                const response = await fetch(`${NASA_BASE_URL}/planetary/apod?api_key=${API_KEY}`);
                const data = await response.json();
                
                const content = `
                    <h3 class="success">${data.title}</h3>
                    <p><strong>Fecha:</strong> ${data.date}</p>
                    ${data.media_type === 'image' ? `<img src="${data.url}" alt="${data.title}">` : `<p>Video disponible en: <a href="${data.url}" target="_blank">${data.url}</a></p>`}
                    <p>${data.explanation}</p>
                    <div class="api-url">URL: ${NASA_BASE_URL}/planetary/apod?api_key=${API_KEY}</div>
                `;
                
                showResult('apod-result', content, 'success');
            } catch (error) {
                showError('apod-result', error.message);
            }
        }

        async function fetchAPODDate() {
            const date = '2023-07-04'; // Fecha espec√≠fica
            showLoading('apod-result');
            try {
                const response = await fetch(`${NASA_BASE_URL}/planetary/apod?api_key=${API_KEY}&date=${date}`);
                const data = await response.json();
                
                const content = `
                    <h3 class="success">${data.title} (${date})</h3>
                    ${data.media_type === 'image' ? `<img src="${data.url}" alt="${data.title}">` : `<p>Video: <a href="${data.url}" target="_blank">Ver video</a></p>`}
                    <p>${data.explanation.substring(0, 200)}...</p>
                `;
                
                showResult('apod-result', content, 'success');
            } catch (error) {
                showError('apod-result', error.message);
            }
        }

        // EPIC Demo
        async function fetchEPICDemo() {
            showLoading('epic-result');
            try {
                const response = await fetch(`${NASA_BASE_URL}/EPIC/api/natural/images?api_key=${API_KEY}`);
                const data = await response.json();
                
                if (data.length > 0) {
                    const image = data[0];
                    const date = image.date.split(' ')[0].replace(/-/g, '/');
                    const imageUrl = `https://epic.gsfc.nasa.gov/archive/natural/${date}/png/${image.image}.png`;
                    
                    const content = `
                        <h3 class="success">Imagen EPIC de la Tierra</h3>
                        <p><strong>Fecha:</strong> ${image.date}</p>
                        <img src="${imageUrl}" alt="Tierra desde EPIC">
                        <p>${image.caption || 'Imagen de la Tierra tomada desde el sat√©lite DSCOVR'}</p>
                        <div class="api-url">Im√°genes disponibles: ${data.length}</div>
                    `;
                    
                    showResult('epic-result', content, 'success');
                } else {
                    showError('epic-result', 'No hay im√°genes disponibles');
                }
            } catch (error) {
                showError('epic-result', error.message);
            }
        }

        async function fetchEPICLatest() {
            showLoading('epic-result');
            try {
                const response = await fetch(`${NASA_BASE_URL}/EPIC/api/natural/date/2023-06-01?api_key=${API_KEY}`);
                const data = await response.json();
                
                if (data.length > 0) {
                    const images = data.slice(0, 3); // Mostrar las primeras 3 im√°genes
                    let content = '<h3 class="success">√öltimas im√°genes EPIC</h3>';
                    
                    images.forEach(image => {
                        const date = image.date.split(' ')[0].replace(/-/g, '/');
                        const imageUrl = `https://epic.gsfc.nasa.gov/archive/natural/${date}/png/${image.image}.png`;
                        content += `
                            <p><strong>Hora:</strong> ${image.date}</p>
                            <img src="${imageUrl}" alt="Tierra desde EPIC" style="max-width: 200px;">
                        `;
                    });
                    
                    showResult('epic-result', content, 'success');
                } else {
                    showError('epic-result', 'No hay im√°genes disponibles para esta fecha');
                }
            } catch (error) {
                showError('epic-result', error.message);
            }
        }

        // Mars Rover Demo
        async function fetchMarsRoverDemo(rover) {
            showLoading('mars-result');
            try {
                const sol = 1000; // Sol marciano
                const response = await fetch(`${NASA_BASE_URL}/mars-photos/api/v1/rovers/${rover}/photos?sol=${sol}&api_key=${API_KEY}`);
                const data = await response.json();
                
                if (data.photos && data.photos.length > 0) {
                    const photos = data.photos.slice(0, 3); // Mostrar las primeras 3 fotos
                    let content = `<h3 class="success">Fotos del Rover ${rover.charAt(0).toUpperCase() + rover.slice(1)}</h3>`;
                    
                    photos.forEach(photo => {
                        content += `
                            <p><strong>Sol:</strong> ${photo.sol} | <strong>C√°mara:</strong> ${photo.camera.full_name}</p>
                            <img src="${photo.img_src}" alt="Foto de Marte" style="max-width: 300px;">
                            <p><strong>Fecha:</strong> ${photo.earth_date}</p>
                        `;
                    });
                    
                    content += `<div class="api-url">Total de fotos disponibles: ${data.photos.length}</div>`;
                    showResult('mars-result', content, 'success');
                } else {
                    showError('mars-result', `No hay fotos disponibles para ${rover} en el sol ${sol}`);
                }
            } catch (error) {
                showError('mars-result', error.message);
            }
        }

        // Near Earth Objects Demo
        async function fetchNEODemo() {
            showLoading('neo-result');
            try {
                const today = new Date().toISOString().split('T')[0];
                const response = await fetch(`${NASA_BASE_URL}/neo/rest/v1/feed?start_date=${today}&end_date=${today}&api_key=${API_KEY}`);
                const data = await response.json();
                
                const neos = data.near_earth_objects[today] || [];
                let content = `<h3 class="success">Objetos Cercanos a la Tierra - ${today}</h3>`;
                
                if (neos.length > 0) {
                    content += `<p><strong>Total de objetos:</strong> ${neos.length}</p>`;
                    
                    neos.slice(0, 3).forEach(neo => {
                        const isPotentiallyHazardous = neo.is_potentially_hazardous_asteroid;
                        content += `
                            <div style="border-left: 3px solid ${isPotentiallyHazardous ? '#ff4757' : '#2ed573'}; padding-left: 10px; margin: 10px 0;">
                                <h4>${neo.name}</h4>
                                <p><strong>Di√°metro estimado:</strong> ${neo.estimated_diameter.kilometers.estimated_diameter_min.toFixed(2)} - ${neo.estimated_diameter.kilometers.estimated_diameter_max.toFixed(2)} km</p>
                                <p><strong>Velocidad:</strong> ${parseFloat(neo.close_approach_data[0].relative_velocity.kilometers_per_hour).toFixed(0)} km/h</p>
                                <p><strong>Distancia:</strong> ${parseFloat(neo.close_approach_data[0].miss_distance.kilometers).toFixed(0)} km</p>
                                <p><strong>Peligroso:</strong> ${isPotentiallyHazardous ? '‚ö†Ô∏è S√≠' : '‚úÖ No'}</p>
                            </div>
                        `;
                    });
                } else {
                    content += '<p>No hay objetos cercanos reportados para hoy.</p>';
                }
                
                showResult('neo-result', content, 'success');
            } catch (error) {
                showError('neo-result', error.message);
            }
        }

        async function fetchNEOStats() {
            showLoading('neo-result');
            try {
                const response = await fetch(`${NASA_BASE_URL}/neo/rest/v1/stats?api_key=${API_KEY}`);
                const data = await response.json();
                
                const content = `
                    <h3 class="success">Estad√≠sticas de NEO</h3>
                    <p><strong>Total de asteroides:</strong> ${data.near_earth_object_count.toLocaleString()}</p>
                    <p><strong>Asteroides potencialmente peligrosos:</strong> ${data.potentially_hazardous_asteroid_count.toLocaleString()}</p>
                    <p><strong>√öltimo elemento agregado:</strong> ${data.last_updated}</p>
                    <div class="api-url">Fuente: Centro de Estudios de Objetos Cercanos a la Tierra (CNEOS)</div>
                `;
                
                showResult('neo-result', content, 'success');
            } catch (error) {
                showError('neo-result', error.message);
            }
        }

        // Earth Imagery Demo
        async function fetchEarthImagery(city) {
            showLoading('earth-result');
            try {
                const coords = CITY_COORDINATES[city];
                const date = '2020-01-01';
                const response = await fetch(`${NASA_BASE_URL}/planetary/earth/imagery?lon=${coords.lon}&lat=${coords.lat}&date=${date}&dim=0.2&api_key=${API_KEY}`);
                
                if (response.ok) {
                    const imageUrl = response.url;
                    const content = `
                        <h3 class="success">Imagen Satelital de ${city}</h3>
                        <p><strong>Coordenadas:</strong> ${coords.lat}, ${coords.lon}</p>
                        <p><strong>Fecha:</strong> ${date}</p>
                        <img src="${imageUrl}" alt="Imagen satelital de ${city}">
                        <div class="api-url">Landsat/Copernicus</div>
                    `;
                    
                    showResult('earth-result', content, 'success');
                } else {
                    showError('earth-result', 'No se pudo obtener la imagen satelital');
                }
            } catch (error) {
                showError('earth-result', error.message);
            }
        }

        // API Status Check
        async function checkAPIStatus() {
            showLoading('status-result');
            try {
                const endpoints = [
                    { name: 'APOD', url: `${NASA_BASE_URL}/planetary/apod?api_key=${API_KEY}` },
                    { name: 'EPIC', url: `${NASA_BASE_URL}/EPIC/api/natural/images?api_key=${API_KEY}` },
                    { name: 'Mars Rovers', url: `${NASA_BASE_URL}/mars-photos/api/v1/rovers?api_key=${API_KEY}` },
                    { name: 'NEO', url: `${NASA_BASE_URL}/neo/rest/v1/stats?api_key=${API_KEY}` }
                ];
                
                let content = '<h3>Estado de APIs de NASA</h3>';
                
                for (const endpoint of endpoints) {
                    try {
                        const response = await fetch(endpoint.url);
                        const status = response.ok ? '‚úÖ Operativo' : '‚ùå Error';
                        const statusColor = response.ok ? 'success' : 'error';
                        content += `<p><strong>${endpoint.name}:</strong> <span class="${statusColor}">${status}</span> (${response.status})</p>`;
                    } catch (error) {
                        content += `<p><strong>${endpoint.name}:</strong> <span class="error">‚ùå No disponible</span></p>`;
                    }
                }
                
                showResult('status-result', content, 'info');
            } catch (error) {
                showError('status-result', error.message);
            }
        }

        async function testAPIKey() {
            showLoading('status-result');
            try {
                const response = await fetch(`${NASA_BASE_URL}/planetary/apod?api_key=${API_KEY}`);
                
                if (response.ok) {
                    const data = await response.json();
                    const content = `
                        <h3 class="success">‚úÖ API Key v√°lida</h3>
                        <p><strong>Estado:</strong> Funcionando correctamente</p>
                        <p><strong>Respuesta de prueba:</strong> ${data.title || 'Datos recibidos'}</p>
                        <p><strong>Rate Limit:</strong> ${API_KEY === 'DEMO_KEY' ? '30 requests/hora' : '1000 requests/hora'}</p>
                        <div class="api-url">API Key: ${API_KEY}</div>
                    `;
                    showResult('status-result', content, 'success');
                } else {
                    showError('status-result', `API Key inv√°lida o problema de conexi√≥n (${response.status})`);
                }
            } catch (error) {
                showError('status-result', error.message);
            }
        }

        // Mostrar API key actual
        document.getElementById('current-api-key').textContent = API_KEY;
    </script>
</body>
</html>